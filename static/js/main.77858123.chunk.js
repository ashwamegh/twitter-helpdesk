(window["webpackJsonptwitter-helpdesk"]=window["webpackJsonptwitter-helpdesk"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),i=n.n(c),o=(n(80),n(13)),l=n.n(o),s=n(26),u=n(35),h=n(36),m=n(25),p=n(37),d=n(38),f=n(42),g=n(15),w=n(57),v=n.n(w),b=n(16);function E(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return E=function(){return e},e}function k(){var e=Object(g.a)(["\n  text-align: center;\n"]);return k=function(){return e},e}l.a.initializeApp({apiKey:"AIzaSyAcnUsvBLCSLS27hx4XPi_gTzdrZYmmvO4",authDomain:"twitter-helpdesk-c0523.firebaseapp.com",databaseURL:"https://twitter-helpdesk-c0523.firebaseio.com",projectId:"twitter-helpdesk-c0523",storageBucket:"",messagingSenderId:"325948537316",appId:"1:325948537316:web:ea9a79b6b1f47366da6ff1"});var y={signInFlow:"popup",signInSuccessUrl:"/signedIn",signInOptions:[l.a.auth.GoogleAuthProvider.PROVIDER_ID,l.a.auth.EmailAuthProvider.PROVIDER_ID]},j=b.a.div(k()),O=b.a.div(E()),S=function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.unregisterAuthObserver=l.a.auth().onAuthStateChanged((function(e){e?localStorage.setItem("twitterHelpdesk.expectSignIn","1"):localStorage.removeItem("twitterHelpdesk.expectSignIn")}))}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver()}},{key:"render",value:function(){return r.a.createElement(j,null,r.a.createElement("h1",null,"Twitter HelpDesk"),r.a.createElement("p",null,"Please sign-in to continue:"),r.a.createElement(O,null,r.a.createElement(v.a,{uiConfig:y,firebaseAuth:l.a.auth()})))}}]),t}(a.Component),I=n(60),x=n.n(I);function T(){var e=Object(g.a)(["\n  width: 15%;\n"]);return T=function(){return e},e}function _(){var e=Object(g.a)(["\n  font-weight: 300;\n"]);return _=function(){return e},e}function D(){var e=Object(g.a)(["\n  background: #b7b7b7f0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50px;\n  color: #000000e0;\n  max-width: 260px;\n  min-height: 56px;\n  cursor: pointer;\n  margin: 0 auto;\n"]);return D=function(){return e},e}function H(){var e=Object(g.a)(["\n  margin: 0 auto;\n  margin-top: 120px;\n  max-width: 290px;\n  min-height: 70px;\n  text-align: center;\n"]);return H=function(){return e},e}var C=b.a.div(H()),R=b.a.div(D()),A=b.a.h3(_()),L=b.a.img(T()),N=Object(s.f)((function(e){var t=e.history;return r.a.createElement("div",null,r.a.createElement(z,null),r.a.createElement(C,null,r.a.createElement(A,null,"Connect your Twitter account"),r.a.createElement(R,{onClick:function(){return function(e){var t=new l.a.auth.TwitterAuthProvider;l.a.auth().signInWithPopup(t).then((function(t){var n=t.credential.accessToken,a=t.credential.secret;localStorage.setItem("twitterHelpdesk.accessToken",n),localStorage.setItem("twitterHelpdesk.accessSecret",a),e.push("/helpdesk")})).catch((function(e){alert("Error connecting Twitter")}))}(t)}},r.a.createElement(L,{src:x.a,alt:"Twitter Logo"}))))})),P=n(121),U=n(127),B=n(122),W=n(123),J=n(126),q=Object(P.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),z=Object(s.f)((function(e){var t=e.history,n=q();return r.a.createElement("div",{className:n.root},r.a.createElement(U.a,{position:"static"},r.a.createElement(B.a,null,r.a.createElement(W.a,{variant:"h6",className:n.title},"Twitter HelpDesk"),r.a.createElement(J.a,{color:"inherit",onClick:function(){return function(e){l.a.auth().signOut(),localStorage.removeItem("twitterHelpdesk.expectSignIn"),e.push("/")}(t)}},"Logout"))))})),G=n(30),M=n(12),F=n(125),V=n(62),K=n.n(V),X=n(43),Y=n.n(X),Z=n(124),$=n(10);function Q(){var e=Object(g.a)(["\n  height: calc(100vh - 64px);\n  overflow-y: scroll;\n"]);return Q=function(){return e},e}function ee(){var e=Object(g.a)(["\n  height: calc(100vh - 64px);\n  width: 100%;\n"]);return ee=function(){return e},e}function te(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 300px;\n"]);return te=function(){return e},e}var ne=function(e){return e.json()},ae=b.a.div(te()),re=b.a.div(ee()),ce=Object(b.a)(Z.a)(Q()),ie=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this,e))).fetchTweetThread=function(e){var t=n.state.tweets.filter((function(t){return t.id_str===e||t.in_reply_to_status_id_str===e})).reverse();n.setState({tweetThread:t,threadID:e})},n.state={tweets:[],tweetThread:[],message:"",threadID:""},n.postThreadReply=n.postThreadReply.bind(Object(M.a)(n)),n.updateNewStatus=n.updateNewStatus.bind(Object(M.a)(n)),n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this;new K.a("1e9ce5b2bc249b69f63c",{cluster:"ap2",forceTLS:!0}).subscribe("chat").bind("message",(function(t){e.setState({tweets:[t].concat(Object(G.a)(e.state.tweets))},(function(){e.fetchTweetThread(e.state.threadID)}))})),fetch("".concat("https://twitter-help.herokuapp.com","/twitter/tweets"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({key:localStorage.getItem("twitterHelpdesk.accessToken"),secret:localStorage.getItem("twitterHelpdesk.accessSecret")})}).then(ne).then((function(e){t.setState({tweets:e})})).catch((function(e){console.log("Request failed",e)}))}},{key:"postThreadReply",value:function(){var e=this.state,t=e.message,n=e.tweetThread;fetch("".concat("https://twitter-help.herokuapp.com","/twitter/reply"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({key:localStorage.getItem("twitterHelpdesk.accessToken"),secret:localStorage.getItem("twitterHelpdesk.accessSecret"),status:"@".concat(n[0].user.screen_name," ").concat(t),statusID:n[0].id_str})}).then(ne).then((function(e){console.log("tweeted")})).catch((function(e){console.log("Request failed",e)}))}},{key:"updateNewStatus",value:function(e){this.setState({message:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.tweets,n=e.tweetThread,a=e.threadID;return r.a.createElement($.p,null,r.a.createElement(z,null),0===t.length?r.a.createElement(ae,null,r.a.createElement(F.a,{style:{margin:12}})):r.a.createElement(re,null,r.a.createElement(Z.a,{container:!0,spacing:0},r.a.createElement(ce,{item:!0,xs:4},oe(t,this.fetchTweetThread,a)),r.a.createElement(ce,{item:!0,xs:8,style:{borderLeft:"1px solid #8080803d"}},le(n),r.a.createElement($.n,{style:{minHeight:150},onChange:this.updateNewStatus,onSend:this.postThreadReply},r.a.createElement($.k,{align:"center"},r.a.createElement($.f,{fit:!0},r.a.createElement($.a,null)),r.a.createElement($.o,null),r.a.createElement($.l,{fit:!0})))))))}}]),t}(a.Component),oe=function(e,t,n){return r.a.createElement($.c,null,e.filter((function(e){return null===e.in_reply_to_status_id})).map((function(e){return r.a.createElement($.d,{active:n===e.id_str,key:e.id,onClick:function(){return t(e.id_str)}},r.a.createElement($.b,{letter:e.user.name.split("")[0],imgUrl:e.user.profile_image_url_https}),r.a.createElement($.e,null,r.a.createElement($.k,{justify:!0},r.a.createElement($.q,{ellipsis:!0},e.user.name.split(" ")[0]),r.a.createElement($.m,{nowrap:!0},Y()(new Date(e.created_at)).format("LT"))),r.a.createElement($.m,{ellipsis:!0},e.text)))})))},le=function(e){return r.a.createElement($.i,{active:!0},e.map((function(e){return r.a.createElement($.h,{avatar:e.user.profile_image_url_https,onlyFirstWithMeta:!0,key:e.id},r.a.createElement($.g,{authorName:e.user.name,date:"".concat(Y()(new Date(e.created_at)).format("ll")," at ").concat(Y()(new Date(e.created_at)).format("LT"))},r.a.createElement($.j,null,e.text)))})))},se=ie,ue=function(e){return null!=l.a.auth().currentUser||localStorage.getItem("twitterHelpdesk.expectSignIn")?r.a.createElement(s.b,e):r.a.createElement(s.a,{to:{pathname:"/"}})},he=function(){return r.a.createElement(u.a,null,r.a.createElement(s.b,{exact:!0,path:"/",component:S}),r.a.createElement(ue,{path:"/signedIn",component:N}),r.a.createElement(ue,{path:"/helpdesk",component:se}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},60:function(e,t,n){e.exports=n.p+"static/media/twitter-icon.902f2b3a.png"},75:function(e,t,n){e.exports=n(101)},80:function(e,t,n){}},[[75,1,2]]]);
//# sourceMappingURL=main.77858123.chunk.js.map